import{R as o,r as f}from"./index.6460afdd.js";import{n as g}from"./router.6fe030b8.js";function w(){const[i,l]=o.useState(new URLSearchParams(globalThis?.window?.location?.hash?.substring(1)));o.useEffect(()=>{const e=()=>{l(new URLSearchParams(globalThis.window.location.hash.substring(1)))};return globalThis.window.addEventListener("hashchange",e),e(),()=>{globalThis.window.removeEventListener("hashchange",e)}},[]);const n=o.useCallback(e=>{globalThis.window&&(window.location.hash=e.toString())},[]);return[i,n]}let a=[],b=(i,l)=>{let n=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},l:l||0,lc:0,listen(s,r){return e.lc=n.push(s,r||e.l)/2,()=>{let t=n.indexOf(s);~t&&(n.splice(t,2),--e.lc||e.off())}},notify(s){let r=!a.length;for(let t=0;t<n.length;t+=2)a.push(n[t],n[t+1],e.value,s);if(r){for(let t=0;t<a.length;t+=4){let u;for(let h=t+1;!u&&(h+=4)<a.length;)a[h]<a[t+1]&&(u=a.push(a[t],a[t+1],a[t+2],a[t+3]));u||a[t](a[t+2],a[t+3])}a.length=0}},off(){},set(s){e.value!==s&&(e.value=s,e.notify())},subscribe(s,r){let t=e.listen(s,r);return s(e.value),t},value:i};return e};function d(i,l,n){let e=new Set([...l,void 0]);return i.listen((s,r)=>{e.has(r)&&n(s,r)})}const c=b("");function m(i,l={}){let n=f.useCallback(s=>l.keys?d(i,l.keys,s):i.listen(s),[l.keys,i]),e=i.get.bind(i);return f.useSyncExternalStore(n,e,e)}function v(){const[i]=w(),l=m(c),n=i.get("q");o.useEffect(()=>{const s=typeof n=="string"?n.toLowerCase():"";c.set(s)},[n]);const e=o.useCallback(s=>{const r=globalThis.window?.location?.pathname==="/react-icons/search/"?"replace":"push";g(`/react-icons/search/#q=${s}`,{history:r}),c.set(s)},[]);return{query:l,setQuery:e}}export{v as u};
